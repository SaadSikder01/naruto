<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>নারুটো গ্যালারি – পোস্ট করুন</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>body{background:#000;color:#fff}</style>
</head>
<body>
<div class="container py-5">
    <h1 class="text-center mb-4 display-4">নারুটো গ্যালারি</h1>
    <div class="card bg-dark mx-auto" style="max-width:600px">
        <div class="card-body">
            <form id="uploadForm">
                <div class="mb-3">
                    <label class="form-label">ছবি বা ভিডিও</label>
                    <input type="file" id="file" class="form-control" accept="image/*,video/*" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">ক্যাপশন (ঐচ্ছিক)</label>
                    <textarea id="caption" class="form-control bg-secondary text-white" rows="3" placeholder="রাসেনগান!"></textarea>
                </div>
                <button type="submit" class="btn btn-warning btn-lg w-100">
                    <span id="btnText">পোস্ট করো</span>
                    <span id="loading" class="spinner-border spinner-border-sm d-none"></span>
                </button>
            </form>
            <div id="preview" class="mt-4 text-center"></div>
        </div>
    </div>
    <div class="text-center mt-4">
        <a href="gallery.html" class="btn btn-danger btn-lg">গ্যালারি দেখো</a>
    </div>
</div>

<script>
const API_KEY = "b5f2e5e0e9e9f0b8e8c8d4e5f6a7b8c9";
document.getElementById('file').onchange=e=>{const f=e.target.files[0];if(f){const u=URL.createObjectURL(f);document.getElementById('preview').innerHTML=f.type.startsWith('video')?`<video src="${u}" controls class="img-fluid rounded"></video>`:`<img src="${u}" class="img-fluid rounded">`}};
document.getElementById('uploadForm').onsubmit=async e=>{
    e.preventDefault();
    const file=document.getElementById('file').files[0];
    const caption=document.getElementById('caption').value.trim()||'';
    const btn=document.getElementById('btnText');
    const load=document.getElementById('loading');
    btn.classList.add('d-none'); load.classList.remove('d-none');
    const fd=new FormData(); fd.append('image',file);
    const res=await fetch(`https://api.imgbb.com/1/upload?key=${API_KEY}`,{method:'POST',body:fd});
    const json=await res.json();
    if(json.success){
        const post={url:json.data.url, thumb:json.data.thumb.url, caption:caption||'নারুটো', time:new Date().toLocaleString('bn-BD'), type:file.type.startsWith('video')?'video':'image'};
        let posts=JSON.parse(localStorage.getItem('realPosts')||'[]');
        posts.unshift(post); localStorage.setItem('realPosts',JSON.stringify(posts));
        alert('পোস্ট হয়ে গেছে!');
        e.target.reset(); document.getElementById('preview').innerHTML='';
    }else alert('কিছু একটা গন্ডগোল হয়েছে');
    btn.classList.remove('d-none'); load.classList.add('d-none');
};
</script>
</body></html>